13539

1번 쿼리

union find 아닌가? find에서 부모 업그레이드 안해줘도 되고 union에서 부모 처리.

2번 쿼리

parent[v]를 v로 바꿔주고 끝

3번 쿼리

LCA는 이지하지. log N (parent만 제대로 처리가 되어있다면)

---

이렇게만 보면 매우 easy. 하지만 아닐것이다.

고민 1.

부모 처리를 어떻게 해주지?

u가 v에 붙을 때 u 서브트리의 모든 parent를 처리해줘야함.

이게 되면 쿼리 3번은 쉬움.

고민 2.

v와 v 부모를 끊을 때도 v 서브트리의 모든 parent를 처리해줘야함.

---

고민의 공통점 : 서브트리에 대한 처리.

서브트리면 오일러 투어가 국룰이긴 한데, 트리가 여러개라서.. 이거 어떻게 해야하지?

---

link/cut tree?!

splay tree?

내 경지를 아득히 넘었다.. 다음 생에 도전하자